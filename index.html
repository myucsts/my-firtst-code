<!DOCTYPE html>
<html lang="ja">
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>施設安全点検レポート</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <header class="page-header">
      <div class="header-top">
        <h1>施設安全点検レポート</h1>
        <span id="app-version" class="app-version" aria-label="バージョン"></span>
      </div>
      <p>
        チェックリストに基づいて点検項目を記録し、結果をコピーして担当者へチャットやメール本文で共有できるツールです。ブラウザだけで動作します。
      </p>
    </header>

    <main class="page-main">
      <section class="panel">
        <h2>点検情報</h2>
        <form id="inspection-form" class="form-grid">
          <label>
            点検箇所
            <input
              id="inspection-area"
              name="inspectionArea"
              type="text"
              placeholder="第一工場 西棟"
              required
            />
          </label>
          <label>
            施設所在地
            <input
              id="facility-location"
              name="facilityLocation"
              type="text"
              placeholder="東京都千代田区..."
            />
          </label>
          <div class="form-field">
            <label for="inspection-date">点検日</label>
            <div class="field-control">
              <input
                id="inspection-date"
                name="inspectionDate"
                type="date"
                required
              />
             
            </div>
          </div>
          <label>
            点検者
            <input
              id="inspector-name"
              name="inspectorName"
              type="text"
              placeholder="山田 太郎"
              required
            />
          </label>
          <label class="full-width">
            その他特記事項
            <textarea
              id="global-notes"
              name="globalNotes"
              rows="3"
              placeholder="全体の所感や連絡事項を記入してください。"
            ></textarea>
          </label>
        </form>
      </section>
 <p class="field-note" role="note">
                点検日を変更すると入力済みのチェック項目はすべてリセットされます。
              </p>
      <section class="panel">
        <div class="list-header">
          <h2>点検箇所とチェックリスト</h2>
          <button type="button" id="reset-status" class="secondary">
            入力をリセット
          </button>
        </div>
        <details class="config-details">
          <summary>チェックリスト設定 (管理者向け)</summary>
          <p class="config-help">
            JSON 形式で点検カテゴリと項目を編集できます。保存するとブラウザに設定が記録され、即座に反映されます。
          </p>
          <div class="config-template">
            <label class="config-template-label">
              テンプレート
              <select id="config-template-select" class="config-template-select"></select>
            </label>
            <div class="config-template-actions">
              <button type="button" id="save-template" class="secondary">
                テンプレートを上書き保存
              </button>
              <button type="button" id="save-template-as" class="secondary">
                新規テンプレートとして保存
              </button>
              <button type="button" id="delete-template" class="secondary danger">
                テンプレートを削除
              </button>
            </div>
          </div>
          <label class="config-textarea-label" for="config-input">チェックリスト定義</label>
          <textarea
            id="config-input"
            class="config-textarea"
            rows="12"
            spellcheck="false"
          ></textarea>
          <div class="config-actions">
            <button type="button" id="apply-config" class="secondary">
              設定を反映
            </button>
            <button type="button" id="reset-config" class="secondary danger">
              既定のチェックリストに戻す
            </button>
            <button type="button" id="copy-config" class="secondary">
              JSON をコピー
            </button>
          </div>
        </details>
        <div class="area-actions">
          <button type="button" id="add-area-button" class="secondary">
            点検箇所を追加
          </button>
        </div>
        <p class="area-description">
          点検箇所ごとにチェックリストを入力できます。上部のタブを切り替え、必要に応じて「点検箇所を追加」で増やしてください。
        </p>
        <div id="areas-container" class="areas-container"></div>
      </section>

      <section class="panel">
        <h2>結果と共有</h2>
        <p class="section-description">
          「結果を更新」で入力内容を下の要約と報告テキストに反映します。「テキストをコピー」を押すとチャットやメール本文に貼り付けられる形でコピーできます。
        </p>
        <div class="actions">
          <button type="button" id="refresh-summary" class="secondary">
            結果を更新
          </button>
          <button type="button" id="copy-report" class="primary">
            テキストをコピー
          </button>
        </div>
        <div id="status-message" role="status" aria-live="polite"></div>
        <section id="summary" class="summary" aria-live="polite"></section>
        <label class="report-preview-label" for="report-text">共有用テキスト</label>
        <textarea
          id="report-text"
          class="report-text"
          rows="10"
          readonly
          aria-describedby="report-text-help"
        ></textarea>
        <p id="report-text-help" class="report-text-help">
          コピー後にチャットやメール本文へ貼り付けて共有してください。
        </p>
      </section>
    </main>

    <button
      type="button"
      id="jump-to-checklist"
      class="floating-shortcut"
      aria-label="点検項目へ移動"
    >
      点検項目へ
    </button>

    <footer class="page-footer">
      <p>
        ブラウザの localStorage に最新の入力が保存されます。共有時は個人情報にご注意ください。
      </p>
    </footer>

    <script src="app.js"></script>
  </body>
</html>
